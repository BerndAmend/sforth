<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<script>sforthThrowOnUnderflow=true</script>
	<script src="../../ext/jquery-2.1.0.min.js"></script>
	<script src="../../sforth-runtime.js"></script>
	<script src="../../sforth.js"></script>
	<script language="JavaScript" type="text/javascript" src="termlib.js"></script>
	<script language="JavaScript" type="text/javascript">	
		function termHandler() {
			// called on <CR> or <ENTER>
			this.newLine();
			var cmd=this.lineBuffer;
			var compiled_code = "";
			try {
				compiled_code = forth.compile(cmd);
			} catch(e) {
				this.type("Compile error:" + e);
			}
			try {
				eval(compiled_code);
			} catch(e) {
				this.type("Catched the error: " + e);
			}
			
			this.prompt();
		}

		var terminal=new Terminal(
			{
				rows: 40,
				cols: 120,
				greeting: 'sforth, Copyright (C) 2013-2016 Bernd Amend <bernd.amend+sforth@gmail.com>',
				termDiv: 'terminal',
				//crsrBlinkMode: true,
				handler: termHandler,
				bgColor: "#ffffff",
				mapANSI: true,
				closeOnESC: false,
				ps: ">",
				historyUnique: true
			}
		);
	</script>

	<style type="text/css">
		.term {
			font-family: courier,fixed,swiss,sans-serif;
			font-size: 12px;
			color: #000000;
			background: none;
		}

		.termReverse {
			color: #ffffff;
			background: #000000;
		}
	</style>
	
</head>
<body>
	<script data-src="../../forth.fs;../../browser.fs;../../console.fs" type="application/sforth">
		: console-low-level-type { x -- }
			x terminal.type(1)
		;
		:jsnoname { x -- } x . ; to forth.compiler_message_handler
	</script>

	<div id="terminal"></div>

	<script>
		terminal.open();
	</script>
</body>
</html>